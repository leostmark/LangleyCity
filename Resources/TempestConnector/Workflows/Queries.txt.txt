INSERT INTO WC_SESSION_DETAILS (SESSION_DETAIL_ID, SESSION_ID, SEARCH_LAYER_ID, LEGAL_ID, GISLINK, GIS_LAYER_ID, GIS_LAYER_NAME, DATE_STAMP, USER_STAMP) SELECT {1}, '{2}', WC_SEARCH_LAYERS.SEARCH_LAYER_ID, LAND_LEGAL.LEGAL_ID, LAND_LEGAL.GISLINK, LAND_LEGAL.GIS_LAYER_ID, WC_GIS_LAYERS.GIS_LAYER_NAME, {3}, 'ESSENTIALS' FROM LAND_LEGAL, WC_GIS_LAYERS, WC_SEARCH_LAYERS WHERE LAND_LEGAL.{4} = {0}UniqueId AND WC_GIS_LAYERS.GIS_LAYER_NAME = {0}LayerName AND WC_GIS_LAYERS.SEARCH_LAYER_ID = WC_SEARCH_LAYERS.SEARCH_LAYER_ID

1 = SESSION_DETAIL_ID
2 = SESSION_ID
3 = GIS_LAYER_NAME


INSERT INTO WC_SESSION_DETAILS (SESSION_DETAIL_ID, SESSION_ID, SEARCH_LAYER_ID, LEGAL_ID, GISLINK, GIS_LAYER_ID, GIS_LAYER_NAME, DATE_STAMP, USER_STAMP) SELECT {1}, '{2}', WC_SEARCH_LAYERS.SEARCH_LAYER_ID, LAND_LEGAL.LEGAL_ID, LAND_LEGAL.GISLINK, LAND_LEGAL.GIS_LAYER_ID, WC_GIS_LAYERS.GIS_LAYER_NAME, {3}, 'ESSENTIALS' FROM LAND_LEGAL, WC_GIS_LAYERS, WC_SEARCH_LAYERS
WHERE LAND_LEGAL.{4} = {0}UniqueId AND WC_GIS_LAYERS.GIS_LAYER_NAME = {0}LayerName AND WC_GIS_LAYERS.SEARCH_LAYER_ID = WC_SEARCH_LAYERS.SEARCH_LAYER_ID


SELECT L.{1} FROM WC_SESSION_DETAILS W, LAND_LEGAL L
WHERE W.SESSION_ID = {0}SessionId AND W.LEGAL_ID = L.LEGAL_ID AND W.GIS_LAYER_NAME = {0}LayerName


2013-05-10
EssentialsToTempest.xaml original query
INSERT INTO WC_SESSION_DETAILS (SESSION_DETAIL_ID, SESSION_ID, SEARCH_LAYER_ID, LEGAL_ID, GISLINK, GIS_LAYER_ID, GIS_LAYER_NAME, DATE_STAMP, USER_STAMP) SELECT {1}, '{2}', WC_SEARCH_LAYERS.SEARCH_LAYER_ID, LAND_LEGAL.LEGAL_ID, LAND_LEGAL.GISLINK, LAND_LEGAL.GIS_LAYER_ID, WC_GIS_LAYERS.GIS_LAYER_NAME, {3}, 'ESSENTIALS' FROM LAND_LEGAL, WC_GIS_LAYERS, WC_SEARCH_LAYERS WHERE LAND_LEGAL.{4} = {0}UniqueId AND WC_GIS_LAYERS.GIS_LAYER_NAME = {0}LayerName AND WC_GIS_LAYERS.SEARCH_LAYER_ID = WC_SEARCH_LAYERS.SEARCH_LAYER_ID
0 = 
1 =
2 = SESSION_ID
3 =
4 =

DELETE FROM WC_SESSION_DETAILS WHERE SESSION_ID = {0}SessionId AND GIS_LAYER_NAME = {1}GIS_LAYER_NAME

WebADF
"INSERT into wc_session_details(session_detail_id,session_id,session_report_id,search_layer_id,legal_id,gislink,EXTERNAL_ID1,EXTERNAL_ID2,GIS_LAYER_ID,GIS_LAYER_NAME,date_stamp,user_stamp) select distinct NEWID(),'{0}',null,'WC001-20030826110635',land_legal.legal_id,ihl_parcel_tempest_join.tempest_id,'0','0','WC-20030826110635-1','PROPERTY',GETDATE(),'insertitemsbygislink.cfm' from ihl_parcel_tempest_join, land_legal where ihl_parcel_tempest_join.parcel_id = {1} and ihl_parcel_tempest_join.tempest_id = land_legal.gislink" inputs="SessionID,id" 

GIS_LAYER_NAME = 'PROPERTY'
0 = SESSION_ID

Tempest's query results
ident_id	SESSION_DETAIL_ID	SESSION_ID	SESSION_REPORT_ID	SEARCH_LAYER_ID	LEGAL_ID	GISLINK	EXTERNAL_ID1	EXTERNAL_ID2	GIS_LAYER_ID	GIS_LAYER_NAME	DATE_STAMP	USER_STAMP
30604204	57752C130506143326900000109373	57752C130506143326900000	NULL	WC001-20030826110635	943920000928150521530000	1119	NULL	NULL	WC-20030826110635-1	PROPERTY	2013-05-10 10:03:27.067	ABROWN

EssentialsToTempest.xaml
A simplified query to use to test.  If I run this in SQL SErver Mgt Studio it inserts a record in the wc_session_details table, which can be used to transfer a record to Tempest.
INSERT INTO [TempestTest].[dbo].[WC_SESSION_DETAILS] (SESSION_DETAIL_ID, SESSION_ID, SEARCH_LAYER_ID, LEGAL_ID, GISLINK, GIS_LAYER_ID, GIS_LAYER_NAME, DATE_STAMP, USER_STAMP) SELECT distinct NEWID(),'57752C130506143326900000','WC001-20030826110635','943920000928150521530000',GISLINK,'WC-20030826110635-1','PROPERTY',GETDATE(),'Essentials' from [TempestTest].[dbo].land_legal where GISLINK = '239'

INSERT INTO [TempestTest].[dbo].[WC_SESSION_DETAILS] (SESSION_DETAIL_ID, SESSION_ID, SEARCH_LAYER_ID, LEGAL_ID, GISLINK, GIS_LAYER_ID, GIS_LAYER_NAME, DATE_STAMP, USER_STAMP) SELECT 
{1}, '{2}', WC_SEARCH_LAYERS.SEARCH_LAYER_ID, LAND_LEGAL.LEGAL_ID, LAND_LEGAL.GISLINK, LAND_LEGAL.GIS_LAYER_ID, WC_GIS_LAYERS.GIS_LAYER_NAME, {3}, 'ESSENTIALS' FROM LAND_LEGAL, WC_GIS_LAYERS, WC_SEARCH_LAYERS WHERE LAND_LEGAL.{4} = {0}UniqueId AND WC_GIS_LAYERS.GIS_LAYER_NAME = {0}LayerName AND WC_GIS_LAYERS.SEARCH_LAYER_ID = WC_SEARCH_LAYERS.SEARCH_LAYER_ID

2013-05-10 This is my slightly amended query
INSERT INTO [TempestTest].[dbo].WC_SESSION_DETAILS (SESSION_DETAIL_ID, SESSION_ID, SEARCH_LAYER_ID, LEGAL_ID, GISLINK, GIS_LAYER_ID, GIS_LAYER_NAME, DATE_STAMP, USER_STAMP) SELECT distinct NEWID(),'{2}',WC_SEARCH_LAYERS.SEARCH_LAYER_ID, LAND_LEGAL.LEGAL_ID, LAND_LEGAL.GISLINK, LAND_LEGAL.GIS_LAYER_ID, WC_GIS_LAYERS.GIS_LAYER_NAME, GETDATE(), 'ESSENTIALS' FROM [TempestTest].[dbo].LAND_LEGAL, [TempestTest].[dbo].WC_GIS_LAYERS, [TempestTest].[dbo].WC_SEARCH_LAYERS WHERE [TempestTest].[dbo].LAND_LEGAL.{4} = {0}UniqueId AND [TempestTest].[dbo].WC_GIS_LAYERS.GIS_LAYER_NAME = {0}LayerName AND [TempestTest].[dbo].WC_GIS_LAYERS.SEARCH_LAYER_ID = [TempestTest].[dbo].WC_SEARCH_LAYERS.SEARCH_LAYER_ID

SELECT DISTINCT (GIS_LAYER_NAME) FROM WC_GIS_LAYERS

SELECT L.{1} FROM WC_SESSION_DETAILS W, LAND_LEGAL L WHERE W.SESSION_ID = {0}SessionId AND W.LEGAL_ID = L.LEGAL_ID AND W.GIS_LAYER_NAME = {0}LayerName




